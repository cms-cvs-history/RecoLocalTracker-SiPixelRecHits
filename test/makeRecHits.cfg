process PROD = {

source = PoolSource { 
          # untracked string fileName = '/afs/fnal.gov/files/home/room2/petar/data/pixdigi.root'
          untracked vstring fileNames = {'file:pgun_simhits_digis.root'}
          untracked int32 maxEvents = -1
          untracked uint32 debugVebosity = 10
          untracked bool   debugFlag     = true
}

es_source magfield = XMLIdealGeometryESSource {
          FileInPath GeometryConfiguration ="Geometry/CMSCommonData/data/FieldConfiguration.xml"
          #the proper root node is set in the xml file
          string rootNodeName=""
}
es_module = VolumeBasedMagneticFieldESProducer {
          double findVolumeTolerance = 0.0
          untracked bool cacheLastVolume = true
          untracked bool timerOn = false
}


es_source = XMLIdealGeometryESSource {
          FileInPath GeometryConfiguration="Geometry/TrackerSimData/data/trackerSimConfiguration.xml"
          string rootNodeName = ""
}

es_module = TrackerGeometricDetESModule {}

es_module = TrackerDigiGeometryESModule {}

service = MessageLogger {
     vstring destinations   = { "debugmessages.txt" }
     PSet debugmessages.txt = { string threshold = "DEBUG"}
     vstring debugModules = { "pixRecHitConverter"}
   } 

########################################################################
#
# Run Pixel Clusterizer and RecHit producer in chain
#
include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"
#
include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi"
########################################################################

module out = PoolOutputModule {
           untracked string fileName = 'pixRecHits.root'
}

path p = {pixClust, pixRecHitConverter ,out}
}