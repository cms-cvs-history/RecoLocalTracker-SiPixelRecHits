process ProcessPixelRecHits = {

  source = PoolSource { 
          untracked vstring fileNames    = {'file:../../../SimTracker/SiPixelDigitizer/test/pixdigi.root'}
          untracked int32 maxEvents      = -1
          untracked uint32 debugVebosity = 10
          untracked bool   debugFlag     = true
  }

  # Initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # Tracker SimGeometryXML
  include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"

  # Tracker Geometry Builder
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  # Tracker Numbering Builder
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  service = MessageLogger {
     untracked vstring destinations    = { "debugmessages.txt" }
     untracked PSet debugmessages.txt  = { untracked string threshold = "DEBUG"}
     untracked vstring debugModules    = { "pixRecHitConverter"}
   } 

########################################################################
#
# Run Pixel Clusterizer and RecHit producer in chain
#
include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"
#
include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi"
########################################################################

module out = PoolOutputModule {
           untracked string fileName = 'pixRecHits.root'
}

path p = {pixClust, 
          pixRecHitConverter,
          out}
}